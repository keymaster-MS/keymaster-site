<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mobile Locksmith Services KeyMaster</title>

  <!-- Consent Manager (leave as-is) -->
  <script type="text/javascript" data-cmp-ab="1" src="https://cdn.consentmanager.net/delivery/autoblocking/982012a7e25f2.js" data-cmp-host="d.delivery.consentmanager.net" data-cmp-cdn="cdn.consentmanager.net" data-cmp-codesrc="16"></script>

  <!-- Google tags (leave as-is) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=AW-16890083421"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);} 
    gtag('js', new Date());
    gtag('config', 'AW-16890083421');
  </script>

  <script async src="https://www.googletagmanager.com/gtag/js?id=G-YTZ2LDPQ06"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);} 
    gtag('js', new Date());
    gtag('config', 'G-YTZ2LDPQ06');
  </script>

  <script async src="https://www.googletagmanager.com/gtag/js?id=G-N4KLY0N1P2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);} 
    gtag('js', new Date());
    gtag('config', 'G-N4KLY0N1P2');
  </script>

  <link rel="icon" type="image/png" sizes="32x32" href="logo.png">
  <link rel="icon" type="image/png" sizes="16x16" href="logo.png">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />

  <style>
    /* Small additions for the language switcher and reviews section */
    .lang-switch { display:flex; gap:.5rem; align-items:center; }
    .lang-switch .btn { padding:.25rem .5rem; }

    .reviews-section { background:#0b243a; color:#fff; }
    .grw { color:#fff; font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    .grw .header { display:flex; align-items:center; justify-content:space-between; margin-bottom:1rem; }
    .grw .title { font-size:1.25rem; font-weight:700; }
    .grw .rating { display:flex; align-items:center; gap:.5rem; font-weight:600; }
    .grw .stars { display:inline-block; line-height:1; }
    .grw .stars i { display:inline-block; width:1rem; height:1rem; background:currentColor; -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\"/></svg>') no-repeat center / contain; mask: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\"/></svg>') no-repeat center / contain; }
    .grw .count { opacity:.85; font-size:.95rem; }
    .grw .powered { font-size:.8rem; opacity:.8; }
    .grw .reviews { display:grid; grid-template-columns: repeat(auto-fill, minmax(260px,1fr)); gap:1rem; }
    .grw .card { background:#11273f; border:1px solid rgba(255,255,255,.08); border-radius:.75rem; padding:1rem; height:100%; display:flex; flex-direction:column; }
    .grw .author { display:flex; align-items:center; gap:.75rem; margin-bottom:.5rem; }
    .grw .avatar { width:36px; height:36px; border-radius:50%; background:#2b3b51; overflow:hidden; }
    .grw .avatar img { width:100%; height:100%; object-fit:cover; }
    .grw .name { font-weight:600; }
    .grw .time { font-size:.85rem; opacity:.8; }
    .grw .text { margin-top:.5rem; white-space:pre-wrap; line-height:1.35; }
    .grw .actions { margin-top:auto; display:flex; justify-content:space-between; align-items:center; gap:.5rem; }
    .grw .btn { display:inline-block; padding:.5rem .75rem; border-radius:.5rem; background:#1e90ff; color:#fff; text-decoration:none; font-weight:600; }
    .grw .btn.outline { background:transparent; border:1px solid rgba(255,255,255,.25); }
  </style>
</head>
<body>
  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top shadow-sm py-3">
    <div class="container">
      <a class="navbar-brand d-flex align-items-center" href="#home">
        <img src="logo.png" alt="Keymaster Logo" width="50" height="50" class="me-2">
        <strong>KEYMASTER LLC</strong>
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavbar" aria-controls="mainNavbar" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse justify-content-end" id="mainNavbar">
        <ul class="navbar-nav">
          <li class="nav-item"><a class="nav-link active" href="#home" data-i18n="nav.home">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="#services" data-i18n="nav.services">Services</a></li>
          <li class="nav-item"><a class="nav-link" href="#about" data-i18n="nav.about">About</a></li>
          <li class="nav-item"><a class="nav-link" href="#reviews" data-i18n="nav.reviews">Reviews</a></li>
          <li class="nav-item"><a class="nav-link" href="#contact" data-i18n="nav.contact">Contact Us</a></li>
        </ul>
        <div class="lang-switch ms-lg-3">
          <button class="btn btn-outline-light btn-sm" onclick="setLanguage('en')" aria-label="Switch to English">üá∫üá∏ EN</button>
          <button class="btn btn-outline-light btn-sm" onclick="setLanguage('es')" aria-label="Cambiar a Espa√±ol">üá™üá∏ ES</button>
        </div>
      </div>
    </div>
  </nav>

  <!-- HERO (HOME) -->
  <section id="home" class="hero d-flex align-items-center justify-content-center text-center text-white section-anchor">
    <div class="overlay"></div>
    <div class="container position-relative">
      <h1 class="display-3 fw-bold" data-i18n="hero.title">Service, reliability,<br>professional.</h1>
      <h3 class="mt-3 fw-semibold" data-i18n="hero.subtitle">24/7 Emergency Mobile Locksmith Services</h3>
      <p class="lead mt-3" data-i18n="hero.lead">
        Affordable Price And Professional<br />
        <strong>Serving Location South Mississippi</strong>
      </p>
      <div class="mt-4 d-flex flex-wrap justify-content-center gap-3">
        <a href="tel:+1 (228) 346-1161" class="btn btn-success px-4 py-2" data-i18n="hero.call">CALL NOW</a>
        <a href="#services" class="btn btn-outline-light px-4 py-2" data-i18n="hero.learn">Learn About My Services</a>
      </div>
    </div>
  </section>

  <!-- SERVICES -->
  <section id="services" class="services-section py-5 text-white section-anchor">
    <div class="container">
      <h2 class="text-center mb-5" data-i18n="services.title">Our Services</h2>
      <div class="row">
        <!-- Service 1 -->
        <div class="col-md-6 col-lg-4 mb-4">
          <div class="service-card text-center">
            <img src="icons/lockout.png" alt="Emergency Lockout" class="service-icon mb-3">
            <h4 data-i18n="services.emergency.title">Emergency Lockout</h4>
            <p data-i18n="services.emergency.desc">Locked out? We're available 24/7 to get you back inside safely and quickly.</p>
          </div>
        </div>
        <!-- Service 2 -->
        <div class="col-md-6 col-lg-4 mb-4">
          <div class="service-card text-center">
            <img src="icons/keys.png" alt="Key Replacement" class="service-icon mb-3">
            <h4 data-i18n="services.keys.title">Key Replacement</h4>
            <p data-i18n="services.keys.desc">Lost your keys? We cut, replace, and program new keys on the spot.</p>
          </div>
        </div>
        <!-- Service 3 -->
        <div class="col-md-6 col-lg-4 mb-4">
          <div class="service-card text-center">
            <img src="icons/car.png" alt="Automotive Locksmith" class="service-icon mb-3">
            <h4 data-i18n="services.auto.title">Automotive Locksmith</h4>
            <p data-i18n="services.auto.desc">We unlock cars, program smart keys, and provide full vehicle locksmith services.</p>
          </div>
        </div>
        <!-- Service 4 -->
        <div class="col-md-6 col-lg-4 mb-4">
          <div class="service-card text-center">
            <img src="icons/house.png" alt="Residential Security" class="service-icon mb-3">
            <h4 data-i18n="services.res.title">Residential Security</h4>
            <p data-i18n="services.res.desc">Upgrade your home with new locks, rekeying, and smart lock installation.</p>
          </div>
        </div>
        <!-- Service 5 -->
        <div class="col-md-6 col-lg-4 mb-4">
          <div class="service-card text-center">
            <img src="icons/commercial.png" alt="Commercial Locksmith" class="service-icon mb-3">
            <h4 data-i18n="services.com.title">Commercial Locksmith</h4>
            <p data-i18n="services.com.desc">Secure your business with access control, rekeying, and master key systems.</p>
          </div>
        </div>
        <!-- Service 6 -->
        <div class="col-md-6 col-lg-4 mb-4">
          <div class="service-card text-center">
            <img src="icons/safe.png" alt="Garage Doors Unlocking" class="service-icon mb-3">
            <h4 data-i18n="services.garage.title">Garage Door Unlocking</h4>
            <p data-i18n="services.garage.desc">We professionally open and repair locked or malfunctioning Garage Doors.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ABOUT -->
  <section id="about" class="about-section text-white py-5 section-anchor">
    <div class="container">
      <div class="row align-items-center">
        <!-- TEXT -->
        <div class="col-lg-6 mb-4 mb-lg-0">
          <h2 class="mb-4" data-i18n="about.title">About Keymaster LLC</h2>
          <p data-i18n="about.p1">
            Keymaster LLC provides fast, reliable locksmith services across South Mississippi. <br>
            Our team handles everything from emergency lockouts to key replacements with professionalism and affordable pricing.
          </p>
          <p data-i18n="about.p2">
            Professionalism, Experience, and Commitment to Service ‚Äî With nearly 15 years of experience in the locksmith industry, the Keymaster LLC team is constantly learning and updating our skills to remain at the forefront of technology.
            <br>We offer a wide range of services to meet all your needs, from quick lockouts to lock replacements and repairs, key duplication, installation of advanced cylinder locks, and electronic lock installations.
            <br>Our services also include Automotive locksmith services, such as car door unlocking, car key duplication, and smart key programming. We also specialize in commercial locksmith services, providing security solutions for businesses of all types.
          </p>
          <p data-i18n="about.p3">Customer satisfaction is our top priority ‚Äî and we have the reviews to prove it!</p>
        </div>

        <!-- IMAGES RIGHT -->
        <div class="col-lg-6 text-center">
          <img src="keymaster car3.jpg" alt="Locksmith Working" class="img-fluid rounded shadow mb-3">
          <div class="mt-2 stacked-images">
            <img src="car position1.jpeg" alt="Lock image 1" class="img-fluid mb-3 stacked-img">
            <img src="car position2.jpg"  alt="Lock image 2" class="img-fluid stacked-img">
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- REVIEWS (Google Places Custom Widget) -->
  <section id="reviews" class="reviews-section py-5 section-anchor">
    <div class="container">
      <h2 class="text-center mb-4" data-i18n="reviews.title">Customer Reviews</h2>
      <div id="google-reviews-widget"></div>
    </div>
  </section>

  <!-- CONTACT -->
  <section id="contact" class="contact-section py-5 text-white section-anchor">
    <div class="container">
      <h2 class="text-center mb-4" data-i18n="contact.title">Contact Us</h2>
      <p class="text-center mb-5" data-i18n="contact.blurb">Need assistance? We're here 24/7 ‚Äî call us or send a message.</p>
      <div class="row">
        <!-- Contact Info -->
        <div class="col-md-6 mb-4">
          <h4 data-i18n="contact.getintouch">Get in Touch</h4>
          <p><strong data-i18n="contact.phone_label">Phone:</strong> <a href="tel:+1 (228) 346-1161" class="text-white">+1 (228) 346-1161</a></p>
          <p><strong data-i18n="contact.email_label">Email:</strong> <a href="mailto:keymaster.ms@gmail.com" class="text-white">keymaster.ms@gmail.com</a></p>
          <p><strong data-i18n="contact.address_label">Address:</strong> Gulfport, MS</p>
          <p><strong data-i18n="contact.hours_label">Hours:</strong> 24/7</p>

          <div class="social-icons mt-3">
            <a href="#" target="_blank"><i class="fab fa-facebook-f"></i></a>
            <a href="#" target="_blank"><i class="fab fa-google"></i></a>
            <a href="#" target="_blank"><i class="fab fa-yelp"></i></a>
          </div>
        </div>

        <!-- Contact Form -->
        <div class="col-md-6">
          <form>
            <div class="mb-3">
              <label class="form-label" data-i18n="form.name_label">Name</label>
              <input type="text" class="form-control" placeholder="Your Name" data-i18n-placeholder="form.name_ph" required>
            </div>
            <div class="mb-3">
              <label class="form-label" data-i18n="form.email_label">Email</label>
              <input type="email" class="form-control" placeholder="Your Email" data-i18n-placeholder="form.email_ph" required>
            </div>
            <div class="mb-3">
              <label class="form-label" data-i18n="form.msg_label">Message</label>
              <textarea class="form-control" rows="4" placeholder="Your Message" data-i18n-placeholder="form.msg_ph" required></textarea>
            </div>
            <button type="submit" class="btn btn-light w-100" data-i18n="form.send">Send Message</button>
          </form>
        </div>
      </div>
    </div>
  </section>

  <footer class="py-4 text-center text-white-50" style="background:#0b243a">
    <small>&copy; 2025 Keymaster LLC 
      <a href="https://www.bbb.org/us/ms/gulfport/profile/mobile-locksmith/keymaster-llc-0523-235905446/#sealclick" target="_blank" rel="nofollow">
        <img src="https://seal-ms.bbb.org/seals/blue-seal-200-42-bbb-235905446.png" style="border: 0;" alt="KeyMaster LLC BBB Business Review" />
      </a>
    </small>
    &nbsp; 
    <a href="web.html" class="text-white-50" style="text-decoration:none;" data-i18n="footer.privacy">Privacy Policy</a>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Nav active on click/scroll (kept) -->
  <script>
    // click
    document.querySelectorAll('.nav-link').forEach(link => {
      link.addEventListener('click', function () {
        document.querySelectorAll('.nav-link').forEach(el => el.classList.remove('active'));
        this.classList.add('active');
      });
    });

    // scroll
    window.addEventListener('scroll', () => {
      const sections = document.querySelectorAll('section[id]');
      const scrollY = window.pageYOffset;
      let currentActive = null;

      sections.forEach(section => {
        const sectionHeight = section.offsetHeight;
        const sectionTop = section.offsetTop - 120; // navbar height
        const sectionId = section.getAttribute('id');
        if (scrollY >= sectionTop && scrollY < sectionTop + sectionHeight) currentActive = sectionId;
      });

      document.querySelectorAll('.nav-link').forEach(link => {
        link.classList.remove('active');
        if (currentActive && link.getAttribute('href') === '#' + currentActive) link.classList.add('active');
      });

      if (scrollY === 0) {
        const home = document.querySelector('.nav-link[href="#home"]');
        if (home) home.classList.add('active');
      }
    });
  </script>

  <!-- ==================== I18N: embedded dictionaries + runtime ==================== -->
  <script type="application/json" id="i18n-en">{
    "nav.home":"Home","nav.services":"Services","nav.about":"About","nav.reviews":"Reviews","nav.contact":"Contact Us",
    "hero.title":"Service, reliability,<br>professional.","hero.subtitle":"24/7 Emergency Mobile Locksmith Services","hero.lead":"Affordable Price And Professional<br /><strong>Serving Location South Mississippi</strong>","hero.call":"CALL NOW","hero.learn":"Learn About My Services",
    "services.title":"Our Services","services.emergency.title":"Emergency Lockout","services.emergency.desc":"Locked out? We're available 24/7 to get you back inside safely and quickly.","services.keys.title":"Key Replacement","services.keys.desc":"Lost your keys? We cut, replace, and program new keys on the spot.","services.auto.title":"Automotive Locksmith","services.auto.desc":"We unlock cars, program smart keys, and provide full vehicle locksmith services.","services.res.title":"Residential Security","services.res.desc":"Upgrade your home with new locks, rekeying, and smart lock installation.","services.com.title":"Commercial Locksmith","services.com.desc":"Secure your business with access control, rekeying, and master key systems.","services.garage.title":"Garage Door Unlocking","services.garage.desc":"We professionally open and repair locked or malfunctioning Garage Doors.",
    "about.title":"About Keymaster LLC","about.p1":"Keymaster LLC provides fast, reliable locksmith services across South Mississippi. <br>Our team handles everything from emergency lockouts to key replacements with professionalism and affordable pricing.","about.p2":"Professionalism, Experience, and Commitment to Service ‚Äî With nearly 15 years of experience in the locksmith industry, the Keymaster LLC team is constantly learning and updating our skills to remain at the forefront of technology.<br>We offer a wide range of services to meet all your needs, from quick lockouts to lock replacements and repairs, key duplication, installation of advanced cylinder locks, and electronic lock installations.<br>Our services also include Automotive locksmith services, such as car door unlocking, car key duplication, and smart key programming. We also specialize in commercial locksmith services, providing security solutions for businesses of all types.","about.p3":"Customer satisfaction is our top priority ‚Äî and we have the reviews to prove it!",
    "coverage.title":"Areas We Serve","coverage.harrison":"Harrison County","coverage.jackson":"Jackson County","coverage.stone":"Stone County","coverage.hancock":"Hancock County","coverage.pearl":"Pearl River County","coverage.george":"George County",
    "reviews.title":"Customer Reviews",
    "contact.title":"Contact Us","contact.blurb":"Need assistance? We're here 24/7 ‚Äî call us or send a message.","contact.getintouch":"Get in Touch","contact.phone_label":"Phone:","contact.email_label":"Email:","contact.address_label":"Address:","contact.hours_label":"Hours:",
    "form.name_label":"Name","form.name_ph":"Your Name","form.email_label":"Email","form.email_ph":"Your Email","form.msg_label":"Message","form.msg_ph":"Your Message","form.send":"Send Message",
    "footer.privacy":"Privacy Policy"
  }</script>

  <script type="application/json" id="i18n-es">{
    "nav.home":"Inicio","nav.services":"Servicios","nav.about":"Sobre nosotros","nav.reviews":"Rese√±as","nav.contact":"Cont√°ctanos",
    "hero.title":"Servicio, fiabilidad,<br>profesionalismo.","hero.subtitle":"Cerrajer√≠a m√≥vil de emergencia 24/7","hero.lead":"Precio accesible y profesional<br /><strong>Atendemos el sur de Misisipi</strong>","hero.call":"LLAMAR AHORA","hero.learn":"Conoce nuestros servicios",
    "services.title":"Nuestros Servicios","services.emergency.title":"Apertura de emergencia","services.emergency.desc":"¬øTe quedaste fuera? Estamos disponibles 24/7 para ayudarte a entrar de forma segura y r√°pida.","services.keys.title":"Reposici√≥n de llaves","services.keys.desc":"¬øPerdiste tus llaves? Cortamos, reemplazamos y programamos llaves en el acto.","services.auto.title":"Cerrajer√≠a automotriz","services.auto.desc":"Abrimos veh√≠culos, programamos llaves inteligentes y brindamos servicios completos para autos.","services.res.title":"Seguridad residencial","services.res.desc":"Actualiza tu hogar con cerraduras nuevas, cambio de combinaci√≥n e instalaci√≥n de cerraduras inteligentes.","services.com.title":"Cerrajer√≠a comercial","services.com.desc":"Protege tu negocio con control de accesos, cambio de combinaci√≥n y sistemas de llaves maestras.","services.garage.title":"Apertura de garaje","services.garage.desc":"Abrimos y reparamos profesionalmente puertas de garaje trabadas o con fallas.",
    "about.title":"Sobre Keymaster LLC","about.p1":"Keymaster LLC ofrece servicios de cerrajer√≠a r√°pidos y confiables en el sur de Misisipi.<br>Nuestro equipo maneja desde aperturas de emergencia hasta reposici√≥n de llaves con profesionalismo y precios accesibles.","about.p2":"Profesionalismo, experiencia y compromiso con el servicio ‚Äî Con casi 15 a√±os en el rubro, el equipo de Keymaster LLC se mantiene actualizado para estar a la vanguardia tecnol√≥gica.<br>Ofrecemos una amplia gama de servicios: aperturas, reemplazo y reparaci√≥n de cerraduras, duplicado de llaves, instalaci√≥n de cilindros avanzados y cerraduras electr√≥nicas.<br>Tambi√©n realizamos cerrajer√≠a automotriz (apertura de puertas, duplicado y programaci√≥n de llaves inteligentes) y soluciones para comercios de todo tipo.","about.p3":"La satisfacci√≥n del cliente es nuestra prioridad ‚Äî ¬°y tenemos rese√±as que lo demuestran!",
    "coverage.title":"Zonas de servicio","coverage.harrison":"Condado de Harrison","coverage.jackson":"Condado de Jackson","coverage.stone":"Condado de Stone","coverage.hancock":"Condado de Hancock","coverage.pearl":"Condado de Pearl River","coverage.george":"Condado de George",
    "reviews.title":"Rese√±as de clientes",
    "contact.title":"Cont√°ctanos","contact.blurb":"¬øNecesitas ayuda? Estamos 24/7 ‚Äî ll√°manos o env√≠anos un mensaje.","contact.getintouch":"Ponte en contacto","contact.phone_label":"Tel:","contact.email_label":"Email:","contact.address_label":"Direcci√≥n:","contact.hours_label":"Horario:",
    "form.name_label":"Nombre","form.name_ph":"Tu nombre","form.email_label":"Correo electr√≥nico","form.email_ph":"Tu correo","form.msg_label":"Mensaje","form.msg_ph":"Tu mensaje","form.send":"Enviar",
    "footer.privacy":"Pol√≠tica de privacidad"
  }</script>

  <script>
    // I18N runtime: reads embedded JSON dictionaries and applies to DOM
    function getDict(lang){
      const el = document.getElementById(lang === 'es' ? 'i18n-es' : 'i18n-en');
      try { return JSON.parse(el.textContent || '{}'); } catch(e){ return {}; }
    }
    async function setLanguage(lang){
      const dict = getDict(lang);
      // text content / HTML
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (dict[key] !== undefined) el.innerHTML = dict[key];
      });
      // placeholders
      document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
        const key = el.getAttribute('data-i18n-placeholder');
        if (dict[key] !== undefined) el.setAttribute('placeholder', dict[key]);
      });
      document.documentElement.setAttribute('lang', lang);
      localStorage.setItem('lang', lang);
      // re-render reviews buttons in selected language
      if (window.renderReviewsWidget) window.renderReviewsWidget();
    }
    document.addEventListener('DOMContentLoaded', () => {
      const saved = localStorage.getItem('lang') || 'en';
      setLanguage(saved);
    });
  </script>

  <!-- ==================== GOOGLE REVIEWS WIDGET ‚Äì CLIENT (Manual Place ID) ==================== -->
<script>
  // Paste your OWN Google Place ID below. No search is performed.
  // You will ALSO paste your API key in the Maps JS script tag further below.
  const PLACE_ID = 'ChIJ5RQB6G4WnIgRRJWBbkRNYcI';

  // UI helpers
  function starHTML(value){
    const full = Math.floor(value||0);
    const frac = (value||0) - full;
    let html = '';
    for (let i=0;i<5;i++){
      if (i < full) html += '<i style="opacity:1"></i>';
      else if (i === full && frac > 0) html += '<i style="opacity:'+ (0.35 + 0.65*frac).toFixed(2) +'"></i>';
      else html += '<i style="opacity:.25"></i>';
    }
    return '<span class="stars" aria-hidden="true">'+html+'</span>';
  }
  function esc(s){ return (s||'').replace(/[&<>]/g, c=>({"&":"&amp;","<":"&lt;",">":"&gt;"}[c])); }

  // Cache so i18n re-render doesn't re-call API
  let __reviewsData = null;

  function renderReviewsWidget(){
    const mount = document.getElementById('google-reviews-widget');
    if (!mount) return;
    const lang = (document.documentElement.lang || 'en').toLowerCase();
    const L = {
      en: { powered: 'Powered by Google', view: 'View on Google', write: 'Write a review' },
      es: { powered: 'Con la tecnolog√≠a de Google', view: 'Ver en Google', write: 'Escribir rese√±a' }
    }[lang] || { powered: 'Powered by Google', view: 'View on Google', write: 'Write a review' };

    if (!__reviewsData){
      mount.innerHTML = '<div class="grw"><p>Loading reviews‚Ä¶</p></div>';
      return;
    }

    const d = __reviewsData;
    const writeUrl = 'https://search.google.com/local/writereview?placeid=' + encodeURIComponent(PLACE_ID);

    mount.innerHTML = `
      <div class="grw">
        <div class="header">
          <div>
            <div class="title">${esc(d.name || 'Google Reviews')}</div>
            <div class="rating" aria-label="Rating ${d.rating || 0} out of 5">
              ${starHTML(Number(d.rating||0))} <span>${Number(d.rating||0).toFixed(1)}</span> <span class="count">(${Number(d.total||0)})</span>
            </div>
          </div>
          <div class="powered">${L.powered}</div>
        </div>
        <div class="reviews">
          ${(d.reviews||[]).slice(0,6).map(rv => `
            <article class="card" aria-label="Review by ${esc(rv.author_name)}">
              <div class="author">
                <span class="avatar">${rv.profile_photo_url ? `<img src="${esc(rv.profile_photo_url)}" alt="">` : ''}</span>
                <div>
                  <div class="name">${esc(rv.author_name || 'Google User')}</div>
                  <div class="time">${esc(rv.relative_time || '')}</div>
                </div>
              </div>
              <div class="rating" aria-hidden="true">${starHTML(Number(rv.rating||0))}</div>
              <div class="text">${esc(rv.text || '')}</div>
              <div class="actions">
                ${rv.author_url ? `<a class="btn outline" href="${esc(rv.author_url)}" target="_blank" rel="nofollow noopener">${L.view}</a>` : '<span></span>'}
                <a class="btn" href="${writeUrl}" target="_blank" rel="nofollow noopener">${L.write}</a>
              </div>
            </article>
          `).join('')}
        </div>
      </div>`;
  }
  window.renderReviewsWidget = renderReviewsWidget;

  // Google Maps callback ‚Äì directly fetch details by PLACE_ID (no search)
  function initReviews(){
    try {
      const service = new google.maps.places.PlacesService(document.createElement('div'));
      service.getDetails({
        placeId: PLACE_ID,
        fields: ['name','url','rating','user_ratings_total','reviews']
      }, (place, status) => {
        if (status !== google.maps.places.PlacesServiceStatus.OK || !place){
          console.error('getDetails failed:', status);
          const mount = document.getElementById('google-reviews-widget');
          if (mount) mount.innerHTML = '<div class="grw"><p>Unable to load reviews.</p></div>';
          return;
        }
        __reviewsData = {
          name: place.name,
          url: place.url,
          rating: place.rating,
          total: place.user_ratings_total,
          reviews: (place.reviews||[]).map(rv => ({
            author_name: rv.author_name,
            author_url: rv.author_url,
            profile_photo_url: rv.profile_photo_url,
            rating: rv.rating,
            relative_time: rv.relative_time_description,
            text: rv.text
          }))
        };
        renderReviewsWidget();
      });
    } catch (e){
      console.error('Maps init error', e);
    }
  }
  window.initReviews = initReviews;
</script>

<!-- Load the Google Maps JavaScript API (Places Library). Replace YOUR_API_KEY with your key. -->
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCq97SzmTKtPbYSO1PaxCwCzre_mLBa0gA&libraries=places&callback=initReviews" async defer></script>

</body>
</html>
